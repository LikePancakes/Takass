<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>Trade Platformu</title>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
  <style>
    body { font-family: sans-serif; background: #f4f4f4; padding: 20px; }
    input, button { padding: 10px; margin-top: 10px; display: block; }
    #messages, #ilanlar { border: 1px solid #ccc; background: white; padding: 10px; margin-top: 20px; }
    #messages { height: 200px; overflow-y: scroll; }
  </style>
</head>
<body>

  <h2>Anonim Messenger</h2>
  <div id="messages"></div>
  <input type="text" id="messageInput" placeholder="MesajÄ±nÄ±zÄ± yazÄ±n..." />
  <button onclick="sendMessage()">GÃ¶nder</button>

  <hr>

  <h2>Trade Ä°lanÄ± Ver</h2>
  <input type="text" id="ilanBaslik" placeholder="Ä°lan BaÅŸlÄ±ÄŸÄ±" />
  <input type="text" id="urun" placeholder="Verilen ÃœrÃ¼n" />
  <input type="text" id="istenenUrun" placeholder="Ä°stenen ÃœrÃ¼n" />
  <button onclick="ilanVer()">Ä°lan Ver</button>

  <div id="ilanlar">
    <h3>Ä°lanlar</h3>
  </div>

  <script>
    // ðŸ”’ Firebase config (kendi config'inse gerekirse gÃ¼ncelle)
    const firebaseConfig = {
      apiKey: "AIzaSyB7hqyOIwdFKF-1lJtym3c-XKG3LBxXRf4",
  authDomain: "takasa-f1c17.firebaseapp.com",
  projectId: "takasa-f1c17",
  storageBucket: "takasa-f1c17.firebasestorage.app",
  messagingSenderId: "458559786293",
  appId: "1:458559786293:web:01ffd0d3c7943d5237507c",
  measurementId: "G-1KKJBKF6MN"
    };

    // Firebase baÅŸlat
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    // ðŸ“¨ Mesaj gÃ¶nderme
    function sendMessage() {
      const input = document.getElementById("messageInput");
      const msg = input.value.trim();
      if (msg !== "") {
        db.ref("messages").push({
          text: msg,
          timestamp: Date.now()
        });
        input.value = "";
      }
    }

    // MesajlarÄ± dinle ve gÃ¶ster
    const messagesDiv = document.getElementById("messages");
    db.ref("messages").on("child_added", snapshot => {
      const message = snapshot.val();
      const p = document.createElement("p");
      p.textContent = message.text;
      messagesDiv.appendChild(p);
      messagesDiv.scrollTop = messagesDiv.scrollHeight;
    });

    // ðŸ“„ Ä°lan verme
    function ilanVer() {
      const baslik = document.getElementById("ilanBaslik").value.trim();
      const urun = document.getElementById("urun").value.trim();
      const istenen = document.getElementById("istenenUrun").value.trim();

      if (baslik && urun && istenen) {
        const ilan = {
          baslik,
          urun,
          istenen,
          zaman: Date.now()
        };
        db.ref("ilanlar").push(ilan);

        // Temizle
        document.getElementById("ilanBaslik").value = "";
        document.getElementById("urun").value = "";
        document.getElementById("istenenUrun").value = "";
      }
    }

    // Ä°lanlarÄ± gÃ¶ster
    const ilanlarDiv = document.getElementById("ilanlar");
    db.ref("ilanlar").on("child_added", snapshot => {
      const ilan = snapshot.val();
      const div = document.createElement("div");
      div.innerHTML = `<strong>${ilan.baslik}</strong><br>
        Verilen: ${ilan.urun} <br>
        Ä°stenen: ${ilan.istenen}<hr>`;
      ilanlarDiv.appendChild(div);
    });
  </script>

</body>
</html>
